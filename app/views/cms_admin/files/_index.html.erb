<div id='file_uploads' class='box'>
  
  <%
    url_param = %w(layout page snippet).inject({}) do |c, type| 
      c["#{type}_id"] = @_assigns[type].id if @_assigns[type] && @_assigns[type].id
      c
    end 
    url_param = url_param.present?? { :file => url_param } : nil
  %>
  <%= form_for :file, :url => cms_admin_site_files_path(@site, url_param), :html => {:multipart => true} do |form| %>
    <a id='uploader_button' href='#' class='big button'><%= t('.button') %></a>
    <%= form.file_field :file, :multiple => true %>
  <% end %>
  
  <div id='uploaded_files'>
    <% Cms::File.order('label').all.each do |file| %>
      <%= render :partial => 'cms_admin/files/file', :object => file %>
    <% end %>
  </div>
</div>